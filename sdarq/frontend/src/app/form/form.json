{
    "completedHtml": "<p><h3>Thank you!</h3></p>",
    "pages": [
     {
      "name": "Metadata",
      "elements": [
       {
        "type": "text",
        "name": "Service",
        "title": "Service name",
        "isRequired": true,
        "requiredErrorText": "Required."
       },
       {
        "type": "text",
        "name": "Product",
        "title": "Product name",
        "isRequired": true,
        "requiredErrorText": "Required."
       },
       {
        "type": "comment",
        "name": "Description",
        "title": "A brief description of the application/service (provide link to external doc if easier)",
        "isRequired": true,
        "requiredErrorText": "Required."
       },
       {
        "type": "text",
        "name": "Security champion",
        "title": "Security champion (main point of contact from a security perspective):",
        "isRequired": true,
        "requiredErrorText": "Required."
       },
       {
        "type": "text",
        "name": "Github URL",
        "title": "Github URL (N/A if you have not written a line of code yet)",
        "isRequired": true,
        "requiredErrorText": "Required."
       },
       {
        "type": "text",
        "name": "Architecture Diagram",
        "title": "Link to Architecture Diagram, ideally a Lucidchart diagram.",
        "isRequired": true,
        "requiredErrorText": "Required."
       }
      ],
      "title": "Metadata"
     },
     {
      "name": "Compliance",
      "elements": [
       {
        "type": "radiogroup",
        "name": "Compliance",
        "title": "Is an SIA (Security Impact Analysis) needed? In order to determine this please select what's applicable. My application:",
        "choices": [
         {
          "value": "Uses a Global Load Balancer that doesn’t already exist",
          "text": " Uses a Global Load Balancer that doesn’t already exist "
         },
         {
          "value": "Cloud Function that can be accessed from anywhere on the internet",
          "text": " Is a new Cloud Function that can be accessed from anywhere on the Internet "
         },
         {
          "value": "New GAE app that doesn’t use Firewall Rules to limit the app that can talk to it",
          "text": " Is a new GAE application that doesn’t use Firewall Rules to limit the applications that can talk to it "
         },
         {
          "value": "Not behind an API Gateway",
          "text": " Is not behind an API Gateway "
         },
         {
          "value": "Does not require government oversight",
          "text": "Does not require government oversight"
         },
         {
          "value": "Uses a new cloud component (GCP) that hasn’t been used before by our microservices",
          "text": "Uses a new cloud component (GCP service) that hasn’t been used before by our microservices."
         }
        ]
       }
      ],
      "title": "Compliance"
     },
     {
      "name": "Architecture",
      "elements": [
       {
        "type": "radiogroup",
        "name": "Architecture",
        "title": "Your service must be based on one of the following",
        "choices": [
         {
          "value": "GAE",
          "text": "Based in GAE (Google App Engine) "
         },
         {
          "value": "GCF",
          "text": "Based in GCF (Google Cloud Functions)"
         },
         {
          "value": "GKE",
          "text": " Based in GKE (Google Kubernetes Engine) "
         }
        ],
        "hasOther": true,
        "otherText": "Other"
       },
       {
        "type": "text",
        "name": "Cluster",
        "visibleIf": "{Architecture} = 'GKE'",
        "title": "Cluster name"
       },
       {
        "type": "text",
        "name": "Function Name",
        "visibleIf": "{Architecture} = 'GCF'",
        "title": "Function name"
       },
       {
        "type": "text",
        "name": "GAE Service",
        "visibleIf": "{Architecture} = 'GAE'",
        "title": "Service name"
       },
       {
        "type": "text",
        "name": "project_id",
        "visibleIf": "{Architecture} = 'GKE' or {Architecture} = 'GCF' or {Architecture} = 'GAE'",
        "title": "Google project name"
       },
       {
        "type": "radiogroup",
        "name": "GCP best practices",
        "title": "Have the GCP best practices been followed in the design and use of cloud services?",
        "choices": [
         {
          "value": "Yes",
          "text": "Yes"
         },
         {
          "value": "No",
          "text": "No"
         }
        ]
       }
      ],
      "title": "Architecture"
     },
     {
      "name": "Security",
      "elements": [
       {
        "type": "checkbox",
        "name": "Security tools",
        "title": "Please select applicable items",
        "choices": [
         {
          "value": "Sourceclear",
          "text": "We are currently using SourceClear for downstream dependency/3rd party component management "
         },
         {
          "value": "Git-secrets",
          "text": "We are currently using git-secrets in our repository"
         },
         {
          "value": "Vault-SecretManager",
          "text": "We are currently using Vault/Secret Manager to store our secrets"
         },
         {
          "value": "Sentry",
          "text": " We are currently using Sentry or something else (ex: Google Debug) for exception handling and reporting"
         },
         {
          "value": "Codacy",
          "text": "We are currently using Codacy for security static code analysis"
         },
         {
          "value": "Trivy",
          "text": "We are currently using tools to scan our Docker images"
         },
         {
          "value": "ZAP",
          "text": "Our service is currently scanned weekly/monthly via ZAP or similar tools"
         }
        ]
       },
       {
        "type": "radiogroup",
        "name": "ApacheProxy for frontend encryption",
        "title": "Are you using the Apache Proxy for the front-end to your application to terminate Encryption?",
        "choices": [
         "Yes",
         "No"
        ]
       },
       {
        "type": "comment",
        "name": "Https implementation",
        "visibleIf": "{ApacheProxy for frontend encryption} = \"No\"",
        "title": "Explain how you are implementing HTTPS",
        "enableIf": "{ApacheProxy for frontend encryption} = \"No\""
       },
       {
        "type": "radiogroup",
        "name": "Runtime protection in your stack",
        "title": "Do you have runtime application self-protection in your stack?",
        "choices": [
         "Yes",
         "No"
        ]
       },
       {
        "type": "radiogroup",
        "name": "Stack protection",
        "visibleIf": "{Runtime protection in your stack} = \"Yes\"",
        "title": "Choose what's applicable:",
        "choices": [
         {
          "value": "We are behind orchestration layer",
          "text": "We are behind orchestration layer"
         },
         {
          "value": "We are using TCell RASP functionality",
          "text": "We are using TCell RASP functionality"
         },
         {
          "value": "We are using Apache/Nginx proxy",
          "text": "We are using Apache/Nginx proxy"
         }
        ]
       },
       {
        "type": "checkbox",
        "name": "Applicable",
        "title": "Check what's applicable",
        "choices": [
         {
          "value": "Certificate for a URL",
          "text": "I need a certificate for a URL "
         },
         {
          "value": "Using persistent storage",
          "text": "We are using persistent storage (other than a SQL database)"
         }
        ]
       }
      ],
      "title": "Security"
     },
     {
      "name": "Logging",
      "elements": [
       {
        "type": "radiogroup",
        "name": "Logging",
        "title": "Are you currently logging or plan to log to either Logit.io or Stackdriver?",
        "choices": [
         "Yes",
         "No"
        ]
       },
       {
        "type": "radiogroup",
        "name": "Logs persistence for at least 90 days",
        "visibleIf": "{Logging} = \"Yes\"",
        "title": "Do logs persist for at least 90 days in a searchable form?",
        "enableIf": "{Logging} = \"Yes\"",
        "choices": [
         "Yes",
         "No"
        ]
       },
       {
        "type": "radiogroup",
        "name": "Are logs reviewed",
        "visibleIf": "{Logging} = \"Yes\"",
        "title": "Are those logs being reviewed by either humans or are alerts set up for anomalous situations?",
        "enableIf": "{Logging} = \"Yes\"",
        "choices": [
         "Yes",
         "No"
        ]
       },
       {
        "type": "radiogroup",
        "name": "Authent/Authorz attemps logged",
        "visibleIf": "{Logging} = \"Yes\"",
        "title": "Are failed authentication and authorization attempts also logged?",
        "enableIf": "{Logging} = \"Yes\"",
        "choices": [
         "Yes",
         "No"
        ]
       }
      ],
      "title": "Logging",
      "description": "Application logging should be always be included for security events. Application logs provide invaluable data for indentifying security incidents, monitoring policy violations, providing information about problems and unusual conditions. They might also be used to record other types of events too such as audit trails e.g. data addition, modification and deletion, data exports, as well as data for subsequent requests for information e.g. data subject access, freedom of information, litigation, police and other regulatory investigations."
     },
     {
      "name": "Testing",
      "elements": [
       {
        "type": "radiogroup",
        "name": "Unit testing",
        "title": "How would you describe the code coverage of your unit tests?",
        "choices": [
         {
          "value": "Robust",
          "text": "Robust: The vast majority of our code is tested or will be tested through unit tests. "
         },
         {
          "value": "Weak",
          "text": " Weak: We have some unit testing, but much of the code is not tested and have no plan of changing it in the future. "
         },
         {
          "value": "Nonexistent",
          "text": " Nonexistent: We currently have no (or almost no) unit tests."
         }
        ]
       },
       {
        "type": "radiogroup",
        "name": "Integration testing",
        "title": "How would you describe the code coverage of your integration tests?",
        "choices": [
         {
          "value": "Robust",
          "text": "Robust: The vast majority of our code is tested or will be tested through integration tests. "
         },
         {
          "value": "Weak",
          "text": "Weak: We have some integration testing, but much of the code is not tested and have no plan of changing it in the future. "
         },
         {
          "value": "Nonexistent",
          "text": " Nonexistent: We currently have no (or almost no) integration tests."
         }
        ]
       },
       {
        "type": "radiogroup",
        "name": "Performance testing",
        "title": "How would you describe the code coverage of your performance tests?",
        "choices": [
         {
          "value": "Robust",
          "text": "Robust: The vast majority of our code is tested or will be tested through performance/scale tests. "
         },
         {
          "value": "Weak",
          "text": " Weak: We have some performance testing, but much of the code is not tested and have no plan of changing it in the future. "
         },
         {
          "value": "Nonexistent",
          "text": " Nonexistent: We currently have no (or almost no) performance tests."
         }
        ]
       },
       {
        "type": "radiogroup",
        "name": "Post-launch monitoring",
        "title": "How would you describe your post-launch monitoring?",
        "choices": [
         {
          "value": "Robust",
          "text": "Robust: We have procedures in place to log and monitor for unexpected crashes, exceptions, and other error conditions. If something looks suspicious, a security-conscious engineer evaluates it. "
         },
         {
          "value": "Weak",
          "text": "Weak: If something goes terribly wrong, such as massive spikes in crash rates or other large-scale anomalies, we will probably notice. But our monitoring is fairly coarse, and there is room for improvement. "
         },
         {
          "value": "Nonexistent",
          "text": " Nonexistent: At the moment, we are not doing any kind of post-release monitoring that looks for signs of exploitation or increases in crashes/exceptions."
         }
        ]
       }
      ],
      "title": "Testing",
      "description": "Simple unit tests: Unit tests are typically used to confirm that the basic building blocks of the application work as expected. Unit tests are easy to repeat — they can run whenever new code is checked into the repository, to confirm that the code still behaves as expected. Unit tests can also check for security features. For example, they can be used to confirm that authentication is required to access user data; or that unexpected HTML tags can't get through input filters or escaping routines. \n\nIntegration testing: Testing performed to expose defects in the interfaces and in the interactions between integrated components or systems.\n\nPerformance/Monitoring testing: Once the application is deployed, the focus usually shifts from testing to monitoring. Watch out for unexpected spikes in error rates, sandbox violations, and other flaky or inexplicable behavior (including intermittent test failures) — and before you dismiss an anomaly, check with your security team. Crashes and flakiness can indicate a race condition or a memory corruption bug (if applicable)."
     },
     {
      "name": "Deployment",
      "elements": [
       {
        "type": "checkbox",
        "name": "Deployment",
        "title": "Please select what's applicable",
        "choices": [
         {
          "value": "Config files do NOT contain any secrets ",
          "text": "Our Deployment config files do NOT contain any secrets "
         },
         {
          "value": "Config files are templatized ",
          "text": "Our Deployment config files are templatized "
         },
         {
          "value": "Scripted solution for CI and CD",
          "text": "We have a scripted solution for CI and CD"
         }
        ]
       }
      ],
      "title": "Deployment"
     },
     {
      "name": "Reliability",
      "elements": [
       {
        "type": "checkbox",
        "name": "Reliability1",
        "title": "Please select what's applicable",
        "choices": [
         {
          "value": "Status endpoint to indicate service health",
          "text": " We have a status endpoint to indicate service health (it should monitor real things like database connections and downstream dependencies) "
         },
         {
          "value": "Stackdriver monitoring",
          "text": " We have Stackdriver to monitor status "
         },
         {
          "value": "PagerDuty for our new service",
          "text": " We have configured PagerDuty for our new service "
         },
         {
          "value": "Service is able to scale in response to load",
          "text": " Our service is able to scale in response to load, either manually or automatically "
         },
         {
          "value": "An on-call playbook for the service, linked it into the main on-call documentation",
          "text": " We have created an on-call playbook for your service, linked it into the main on-call documentation"
         }
        ]
       }
      ],
      "title": "Reliability"
     },
     {
      "name": "Notes",
      "elements": [
       {
        "type": "comment",
        "name": "Notes",
        "title": "Provide any additional information that you think it's important in regards to your application/service"
       }
      ],
      "title": "Notes"
     },
     {
      "name": "Alerts",
      "elements": [
       {
        "type": "html",
        "name": "JIRA_alert",
        "html": "<p class=\"jira_ticket_alert\">Please create a JIRA ticket for all the recommendations listed below in the next step.<p>"
       },
       {
        "type": "html",
        "name": "Alert-general",
        "html": "<div class=\"tip\">Please reach out to AppSec team for initial security discussion. This is basically a\n            Threat Modeling and Security Architecture Review session. The main purpose of the meeting is for us to take\n an iterative, recursive look at the architecture and design of a new service/system.</div>"
       },
       {
        "type": "html",
        "name": "Alert-Compliance",
        "html": "<div class=\"highs\">Get Started with the SIA doc:\n         <ul>\n           <li><a href=\"https://docs.google.com/document/d/1IPsRaAXboI48YaUYDyID15Q2W5gizaH6LTzQN0i_gJs/edit\">SIA Doc</a>\n Build a concept of operations/Security Impact Assessment document. The SIA should be placed in\n <a href=\"https://drive.google.com/drive/folders/1xIJmmkv3nn6Rq4cWMH5_CaIhVf0D-VLG\">this google drive folder</a>.\n </li>\n <li>Update the<a href=\"https://docs.google.com/document/d/1HZNxtX4sbUD-MdgLB1x66v2-bcKdYCh9a-t7a5NPQps/edit#heading=h.k2buho6j0gen\">\n  Terra/FireCloud Design Specification Document</a></li>\n <li>Update the <a href=\"https://app.lucidchart.com/documents/edit/fd25eae4-291a-409a-8859-1ac2511df633?shared=true&\">\n Terra/Firecloud Network Diagram</a> and  <a href=\"https://app.lucidchart.com/documents/edit/eb48da56-0e19-450a-b817-62d3999c6faf/CNr_hVP~kKkf?callback=close&name=docs&callback_type=back&v=3022&s=624\">Terra/FireCloud Platform Architecture</a></li>\n <li>Make a user flow of your component (and/or alter the FC one), make sure to show how it connects to rest of Terra/FireCloud\n <a href=\"https://www.lucidchart.com/blog/why-user-flow-diagrams-are-worth-your-time\">User Flow</a>\n </li>\n <li>Make a data flow diagram of your component (and/or alter the FC one), make sure to show how it connects\n to rest of Terra/FireCloud <a href=\"https://www.lucidchart.com/pages/data-flow-diagram\">Data Flow Diagram</a>\n </li>\n </ul></div>"
       },
       {
        "type": "html",
        "name": "Alert-Sourceclear",
        "visibleIf": "{Security tools} notcontains \"Sourceclear\"",
        "html": "<div class=\"highs\">You must use SourceClear for downstream dependency/3rd\n            party component management. Ask AppSec team to add your repo.</div>"
       },
       {
        "type": "html",
        "name": "Alert-Trivy",
        "visibleIf": "{Security tools} notcontains \"Trivy\"",
        "html": "<div class=\"highs\">You must use security tools to scan your Docker images. Ask AppSec team to help you setup this tool.</div>"
       },
       {
        "type": "html",
        "name": "Alert-ZAP",
        "visibleIf": "{Security tools} notcontains \"ZAP\"",
        "html": "<div class=\"highs\">Your service must be scanned weekly/mothly via SAST tools. Ask AppSec team to help you setup this tool.</div>"
       },
       {
        "type": "html",
        "name": "Alert-gitsecrets",
        "visibleIf": "{Security tools} notcontains \"Git-secrets\"",
        "html": "<div class=\"highs\">You must use <a href=\"https://github.com/awslabs/git-secrets\">git-secrets</a>\n            to prevent accidental commit of secrets to source code repository. Get started\n            <a href=\"https://docs.google.com/document/d/1_7deaZd2XbjUetVJs8EsQg6JbW_MEX2iFgXpnR_PyYs/edit#heading=h.4f1e34ah25ia\">here</a></div>"
       },
       {
        "type": "html",
        "name": "Alert-vault",
        "visibleIf": "{Security tools} notcontains 'Vault-SecretManager'",
        "html": "<div class=\"highs\">You should only store secrets in\n            <a href=\"https://www.vaultproject.io/\">Vault</a> , <a href=\"https://cloud.google.com/secret-manager\">Google Secret Manager</a> or similar tools. </div>  "
       },
       {
        "type": "html",
        "name": "Alert-sentry",
        "visibleIf": "{Security tools} notcontains \"Sentry\"",
        "html": "<div class=\"highs\">You should setup\n            <a href=\"https://sentry.io/welcome/\">Sentry</a>. Reach out to #dsp-devops to get started.</div>"
       },
       {
        "type": "html",
        "name": "Alert-codacy",
        "visibleIf": "{Security tools} notcontains \"Codacy\"",
        "html": "<div class=\"highs\">You should use\n            <a href=\"https://www.codacy.com/\">Codacy</a> or similar tools for security static code analysis.\n  Reach out to Appsec team to set it up for your repository.\n</div>"
       },
       {
        "type": "html",
        "name": "Alert-RuntimeProtection",
        "visibleIf": "{Stack protection} empty or {Runtime protection in your stack} = 'No'",
        "html": "<div class=\"highs\">Please make sure your service is using Tcell Rapid functionalities or is behind the orchestration layer to add some runtime protection in your stack. RASP in the app is preferred over WAF/Apache proxy. Ask appsec team if you need more clarification on this.</div>"
       },
       {
        "type": "html",
        "name": "question1",
        "visibleIf": "{GCP best practices} = 'No'",
        "html": "<div class=\"highs\">Please check this <a href=\"https://docs.google.com/document/d/1adV0LC2f_GIpl3A1AeoQuNiwcP59NToIt6VYT3xRCkU/edit#heading=h.80ef333b1wz\">doc</a> to  manage your GCP project.</div>"
       },
       {
        "type": "html",
        "name": "Alert-encryptionBackupOptions",
        "visibleIf": "{Applicable} contains \"Using persistent storage\"",
        "html": "<div class=\"highs\">Reach out to DevOps team about persistence about Encryption and Backup options for your persistence storage.</div>"
       },
       {
        "type": "html",
        "name": "Alert-logsPersistence",
        "visibleIf": "{Logs persistence for at least 90 days} = \"No\"",
        "html": "<div class=\"highs\">Please make sure to allow logs to persist for at least 90 days in a searchable form. If you don't have a good idea of what events to audit, ask DevOps.If your service is part of the Terra system, the minimum set of events that must be audited are:\n<ul>\n<li>Account Management: account created, account deleted, account disabled, account expired, password changed </li>\n<li>Directory Service: Object (user, machine,etc) Added to domain/directory. Object removed from domain/directory. Domain policy change. </li>\n<li>Filesystem Events: Directory created. Directory deleted. Directory read. Directory write. Directory permissions changed. File created. File deleted. File read. File write. File permissions changed. Object access.</li>\n<li>Logging Event: Event log full. Event log overwritten.</li>\n<li>Network Events: ACL changed. Traffic blocked at firewall.</li>\n<li>Policy Change: All</li>\n<li>Privilege Use: Privilege escalation (i.e sudo). Privileged object or service called. Object accessed by privileged account.</li>\n<li>Process Tracking: Process executed. Process terminated. Scheduled event executed. Scheduled event failed.</li>\n<li>System Events: Service stopped. System startup. System shutting down. Session disconnected.</li>\n</ul>\n</div>"
       },
       {
        "type": "html",
        "name": "Alert-LoggingMonitoring",
        "visibleIf": "{Are logs reviewed} = \"No\"",
        "html": "<div class=\"highs\">For logging you should be able to know WHO did WHAT to WHAT OBJECT and WHEN. You must have some human review of logs on a regular basis for key events, and have alerts setup for these events. Ask dsp-devops if you need clarification.</div>"
       },
       {
        "type": "html",
        "name": "Alert-logAuthAttemps",
        "visibleIf": "{Authent/Authorz attemps logged} = \"No\"",
        "html": "<div class=\"highs\">You must log authorization and authentication attempts. The application has the most information about the user (e.g. identity, roles, permissions) and the context of the event (target, action, outcomes), and often this data is not available to either infrastructure devices, or even closely-related applications.</div>"
       },
       {
        "type": "html",
        "name": "Alert-serviceScalability",
        "visibleIf": "{Reliability1} notcontains \"Service is able to scale in response to load\"",
        "html": "<div class=\"highs\">Your service must be able to scale in response to load, either manually or automatically. Ask DevOps if you need more clarification on this.</div>"
       },
       {
        "type": "html",
        "name": "Alert-certificate",
        "visibleIf": "{Applicable} contains \"Certificate for a URL\"",
        "html": "<div class=\"medium\">Reach out to DevOps team about certificates for a URL\n</div>"
       },
       {
        "type": "html",
        "name": "Alert-unitTesting",
        "visibleIf": "{Unit testing} = \"Weak\"  or {Unit testing} = \"Nonexistent\"",
        "html": "<div class=\"medium\">Unit tests have become quasi-standard for testing the functionality of software at a low level. Although this questionnaire focuses on security, the functional correctness of the application is also important. Particularly for web applications, where it is difficult (often impossible) to fall back to a previous version, functional bugs can cause problems with both integrity and availability. Consider implementing unit tests. For services within the Terra system boundary, unit tests are required. Please contact QA for guidance.</div>"
       },
       {
        "type": "html",
        "name": "Alert-integrationTesting",
        "visibleIf": "{Integration testing} = \"Weak\" or {Integration testing} = \"Nonexistent\"",
        "html": "<div class=\"medium\">Integration testing will show you how well your modules get along for at least 90 days in a searchable form. Please consider implementing. For services within the Terra system boundary, integration tests are required. Please contact QA for guidance.</div>"
       },
       {
        "type": "html",
        "name": "Alert-performanceTesting",
        "visibleIf": "{Performance testing} = \"Weak\"  or {Performance testing} = \"Nonexistent\"",
        "html": "<div class=\"medium\">Performance testing will determine whether your service meets scalability and stability requirements under expected workloads. Please consider implementing. Please contact QA for guidance regarding services within the Terra system boundary.</div>"
       },
       {
        "type": "html",
        "name": "Alert-monitoring",
        "visibleIf": "{Post-launch monitoring} = \"Weak\" or {Post-launch monitoring} = \"Nonexistent\"",
        "html": "<div class=\"medium\">Exceptions and crashes often indicate an underlying security problem. Monitoring the deployed application can go a long way toward quickly identifying and subsequently fixing vulnerabilities. In carefully designed software products, exceptions should be a fairly rare occurrence; it therefore usually does not introduce significant overhead to monitor for them.</div>"
       },
       {
        "type": "html",
        "name": "Alert-filesWithoutSecrets",
        "visibleIf": "{Deployment} notcontains \"Config files do NOT contain any secrets \"",
        "html": "<div class=\"medium\">You need to ensure that your config files contain no secrets. Additionally please review <a href=\"https://dsp-security.broadinstitute.org/platform-security-categories/managing-secrets\">DSP Security</a> on how to avoid leaking secrets to build logs.</div>"
       },
       {
        "type": "html",
        "name": "Alert-ciConfigTemplatized",
        "visibleIf": "{Deployment} notcontains \"Config files are templatized \"",
        "html": "<div class=\"medium\">We recommmend that your CI config files are templatized\n</div>"
       },
       {
        "type": "html",
        "name": "Alert-scriptedSolution",
        "visibleIf": "{Deployment} notcontains \"Scripted solution for CI and CD\"",
        "html": "<div class=\"medium\">We recommend that you have a scripted solution for CI/CD.</div>"
       },
       {
        "type": "html",
        "name": "Alert-statusEndpoint",
        "visibleIf": "{Reliability1} notcontains \"Status endpoint to indicate service health\"",
        "html": "<div class=\"medium\">Have a status endpoint to indicate service health (it should monitor real things like database connections and downstream dependencies)</div>"
       },
       {
        "type": "html",
        "name": "Alert-relicSynthetic",
        "visibleIf": "{Reliability1} notcontains 'Stackdriver monitoring'",
        "html": "<div class=\"medium\">Have Stackdriver configured to monitor/status.</div>"
       },
       {
        "type": "html",
        "name": "Alert-pagerDuty",
        "visibleIf": "{Reliability1} contains \"PagerDuty for our new service\"",
        "html": "<div class=\"medium\">Configure PagerDuty for your new service. Reach out to DevOps if you have questions.</div>"
       },
       {
        "type": "html",
        "name": "Alert-oncallPlaybook",
        "visibleIf": "{Reliability1} notcontains \"An on-call playbook for the service, linked it into the main on-call documentation\"",
        "html": "<div class=\"medium\">You should create an on-call playbook for your service, and link it into the main on-call documentation</div>"
       }
      ],
      "title": "Alerts"
     },
     {
      "name": "Jira Ticket",
      "elements": [
       {
        "type": "text",
        "name": "JiraProject",
        "title": "Add Jira project to create ticket",
        "description": "Please add the KEY of your Jira project. For example: ATP"
       },
       {
        "type": "checkbox",
        "name": "Ticket_Description",
        "title": "Add alerts in your ticket description:",
        "enableIf": "{JiraProject} notempty",
        "isRequired": true,
        "choices": [
         {
          "value": "Please reach out to AppSec team for initial security discussion. This is basically a Threat Modeling and Security Architecture Review session. The main purpose of the meeting is for us to take  an iterative, recursive look at the architecture and design of a new service/system.",
          "text": "Please reach out to AppSec team for initial security discussion. This is basically a Threat Modeling and Security Architecture Review session. The main purpose of the meeting is for us to take  an iterative, recursive look at the architecture and design of a new service/system."
         },
         {
          "value": "You must use SourceClear for downstream dependency/3rd  party component management. Ask AppSec team to add your repo.",
          "visibleIf": "{Security tools} notcontains \"Sourceclear\""
         },
         {
          "value": "You must use security tools to scan your Docker images. Ask AppSec team to help you setup this tool.",
          "visibleIf": "{Security tools} notcontains \"Trivy\""
         },
         {
          "value": "Your service must be scanned weekly/mothly via SAST tools. Ask AppSec team to help you setup this tool.",
          "visibleIf": "{Security tools} notcontains \"ZAP\""
         },
         {
          "value": "You should only store secrets in Vault, Secret Manager or similar tools.",
          "visibleIf": "{Security tools} notcontains 'Vault-SecretManager'"
         },
         {
          "value": "You should setup Sentry. Reach out to AppSec team to get started.",
          "visibleIf": "{Security tools} notcontains \"Sentry\""
         },
         {
          "value": "You should use Codacy or smilar tools for security static code analysis. Ask AppSec team to help you setup this tool.",
          "visibleIf": "{Security tools} notcontains \"Codacy\""
         },
         {
          "value": "Please make sure your service is using Tcell Rapid functionalities or is behind the orchestration layer to add some runtime protection in your stack. RASP in the app is preferred over WAF/Apache proxy. Ask appsec team if you need more clarification on this.",
          "visibleIf": "{Stack protection} empty or {Runtime protection in your stack} = 'No'"
         },
         {
          "value": "Reach out to DevOps team about certificates for a URL.",
          "visibleIf": "{Applicable} contains \"Certificate for a URL\""
         },
         {
          "value": "Reach out to DevOps team about persistence about Encryption and Backup options for your persistence storage.",
          "visibleIf": "{Applicable} contains \"Using persistent storage\""
         },
         {
          "value": "Please make sure to allow logs to persist for at least 90 days in a searchable form. If you don't have a good idea of what events to audit, ask DevOps.If your service is part of the Terra system, the minimum set of events that must be audited are: Account Management: account created, account deleted, account disabled, account expired, password changed. Directory Service: Object (user, machine,etc) Added to domain/directory. Object removed from domain/directory. Domain policy change. Filesystem Events: Directory created. Directory deleted. Directory read. Directory write. Directory permissions changed. File created. File deleted. File read. File write. File permissions changed. Object access. >Logging Event: Event log full. Event log overwritten. Network Events: ACL changed. Traffic blocked at firewall. Policy Change: All. Privilege Use: Privilege escalation (i.e sudo). Privileged object or service called. Object accessed by privileged account. Process Tracking: Process executed. Process terminated. Scheduled event executed. Scheduled event failed. System Events: Service stopped. System startup. System shutting down. Session disconnected.",
          "text": "Please make sure to allow logs to persist for at least 90 days in a searchable form. If you don't have a good idea of what events to audit, ask DevOps.If your service is part of the Terra system, the minimum set of events that must be audited are: Account Management: account created, account deleted, account disabled, account expired, password changed. Directory Service: Object (user, machine,etc) Added to domain/directory. Object removed from domain/directory. Domain policy change. Filesystem Events: Directory created. Directory deleted. Directory read. Directory write. Directory permissions changed. File created. File deleted. File read. File write. File permissions changed. Object access. Logging Event: Event log full. Event log overwritten. Network Events: ACL changed. Traffic blocked at firewall. Policy Change: All Privilege Use: Privilege escalation (i.e sudo). Privileged object or service called. Object accessed by privileged account. Process Tracking: Process executed. Process terminated. Scheduled event executed. Scheduled event failed.System Events: Service stopped. System startup. System shutting down. Session disconnected.",
          "visibleIf": "{Logs persistence for at least 90 days} = \"No\""
         },
         {
          "value": "For logging you should be able to know WHO did WHAT to WHAT OBJECT and WHEN. You must have some human review of logs on a regular basis for key events, and have alerts setup for these events. Ask dsp-devops if you need clarification.",
          "visibleIf": "{Are logs reviewed} = \"No\""
         },
         {
          "value": "You should log authorization and authentication attempts. The application has the most information about the user (e.g. identity, roles, permissions) and the context of the event (target, action, outcomes), and often this data is not available to either infrastructure devices, or even closely-related applications.",
          "visibleIf": "{Authent/Authorz attemps logged} = \"No\""
         },
         {
          "value": "Unit tests have become quasi-standard for testing the functionality of software at a low level. Although this questionnaire focuses on security, the functional correctness of the application is also important. Particularly for web applications, where it is difficult (often impossible) to fall back to a previous version, functional bugs can cause problems with both integrity and availability. Consider implementing unit tests.",
          "visibleIf": "{Unit testing} = \"Weak\"  or {Unit testing} = \"Nonexistent\""
         },
         {
          "value": "Integration testing will show you how well your modules get along for at least 90 days in a searchable form. Please consider implementing. For services within the Terra system boundary, integration tests are required. Please contact QA for guidance.",
          "visibleIf": "{Integration testing} = \"Weak\" or {Integration testing} = \"Nonexistent\""
         },
         {
          "value": "Performance testing will determine whether your service meets scalability and stability requirements under expected workloads. Please consider implementing. Please contact QA for guidance regarding services within the Terra system boundary.",
          "visibleIf": "{Performance testing} = \"Weak\"  or {Performance testing} = \"Nonexistent\""
         },
         {
          "value": "Exceptions and crashes often indicate an underlying security problem. Monitoring the deployed application can go a long way toward quickly identifying and subsequently fixing vulnerabilities. In carefully designed software products, exceptions should be a fairly rare occurrence; it therefore usually does not introduce significant overhead to monitor for them.",
          "visibleIf": "{Post-launch monitoring} = \"Weak\" or {Post-launch monitoring} = \"Nonexistent\""
         },
         {
          "value": "You need to ensure that your config files contain no secrets. Additionally please review DSP Security (https://dsp-security.broadinstitute.org/platform-security-categories/managing-secrets ) on how to avoid leaking secrets to build logs.",
          "visibleIf": "{Deployment} notcontains \"Config files do NOT contain any secrets \""
         },
         {
          "value": "We recommmend that your CI config files are templatized.",
          "visibleIf": "{Deployment} notcontains \"Config files are templatized \""
         },
         {
          "value": "We recommend that you have a scripted solution for CI/CD.",
          "visibleIf": "{Deployment} notcontains \"Scripted solution for CI and CD\""
         },
         {
          "value": "Have a status endpoint to indicate service health (it should monitor real things like database connections and downstream dependencies)",
          "visibleIf": "{Reliability1} notcontains \"Status endpoint to indicate service health\""
         },
         {
          "value": "Have Stackdriver configured to monitor/status.",
          "visibleIf": "{Reliability1} notcontains 'Stackdriver monitoring'"
         },
         {
          "value": "Configure PagerDuty for your new service. Reach out to DevOps if you have questions.",
          "visibleIf": "{Reliability1} contains \"PagerDuty for our new service\""
         },
         {
          "value": "Your service must be able to scale in response to load, either manually or automatically. Ask DevOps if you need more clarification on this.",
          "visibleIf": "{Reliability1} notcontains \"Service is able to scale in response to load\""
         },
         {
          "value": "You should create an on-call playbook for your service, and link it into the main on-call documentation.",
          "visibleIf": "{Reliability1} notcontains \"An on-call playbook for the service, linked it into the main on-call documentation\""
         },
         {
          "value": "Please check this doc (https://docs.google.com/document/d/1adV0LC2f_GIpl3A1AeoQuNiwcP59NToIt6VYT3xRCkU/edit#heading=h.80ef333b1wz ) to  manage your GCP project.",
          "visibleIf": "{GCP best practices} = 'No'"
         }
        ],
        "hasSelectAll": true
       }
      ],
      "title": "Jira Ticket"
     }
    ],
    "showNavigationButtons": "top",
    "showQuestionNumbers": "off",
    "questionErrorLocation": "bottom",
    "showProgressBar": "top"
   }