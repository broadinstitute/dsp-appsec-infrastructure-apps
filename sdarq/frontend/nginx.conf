http {
    map $http_origin $allowed_origin {
        default ""; 
        "https://sdarq.dsp-appsec-dev.broadinstitute.org" $http_origin;
        "https://sdarq.dsp-appsec-prod.broadinstitute.org" $http_origin;
    }

server {
  listen 80;
  add_header X-Frame-Options SAMEORIGIN;
  add_header X-Content-Type-Options nosniff;
  add_header X-XSS-Protection "1; mode=block";
  add_header Content-Security-Policy "connect-src 'self';base-uri 'self';form-action 'self';";
  add_header Cache-Control no-cache;
  add_header Access-Control-Allow-Origin $allowed_origin;
  add_header Access-Control-Allow-Methods "GET, OPTIONS, POST";
  add_header Strict-Transport-Security "max-age=expireTime";
  server_tokens off;

  location / {
    root /usr/share/nginx/html;
    index index.html index.htm;
    try_files $uri $uri/ /index.html =404;
  }
  keepalive_timeout 650;
  keepalive_requests 10000;
}
}